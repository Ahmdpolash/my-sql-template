generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id         String     @id @default(uuid())
  name       String
  email      String     @unique
  password   String
  profilePic String?    @default("")
  isVerified Boolean    @default(false)
  role       UserRole   @default(USER)
  status     UserStatus @default(Active)

  provider  String   @default("local")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  Otp       Otp[]

  @@map("users")
}

model Otp {
  id          String   @id @default(uuid())
  otpCode     Int
  expiresAt   DateTime
  userId      String
  minAttempts Int      @default(0)
  maxAttempts Int      @default(4)
  isUsed      Boolean  @default(false)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([expiresAt])
  @@map("otps")
}

enum UserRole {
  USER
  ADMIN
  SUPER_ADMIN
}

enum UserStatus {
  Active
  Inactive
  Banned
}

/**
 * id     String @id @default(auto()) @map("_id") @db.ObjectId
 * userId String @db.ObjectId




 model LoginActivity {
  id     String @id @default(auto()) @map("_id") @db.ObjectId
  userId String @db.ObjectId
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  ipAddress  String?
  userAgent  String?
  deviceType String? // e.g., "Mobile", "Desktop", "Tablet"
  browser    String? // e.g., "Chrome", "Safari", "Firefox"
  os         String? // e.g., "Windows", "macOS", "Android", "iOS"
  platform   DevicePlatform?
  location   String? // City, Country (if available)

  loginAt       DateTime @default(now())
  isSuccessful  Boolean  @default(true)
  failureReason String? // If login failed

  @@index([userId, loginAt])
  @@index([userId, isSuccessful])
  @@map("login_activities")
}









 */
